# ì¦‰ì„ ëª¨ì„ ê¸°ëŠ¥ (ìˆ˜ì •ë³¸) - ì™„ì „ ìµëª… ì‹œìŠ¤í…œ

## ğŸ¯ í•µì‹¬ ì›ì¹™

1. **ì™„ì „í•œ ìµëª…ì„±**: ë§¤ì¹­ í›„ì—ë„ ë‹‰ë„¤ì„ë§Œ ê³µê°œ, í”„ë¡œí•„ ì •ë³´ ì—†ìŒ
2. **ì´ë ¥ ë³´ì¡´**: ëª¨ë“  í™œë™ ê¸°ë¡ì€ ë³´ì¡´ë˜ë‚˜ ìµëª…ìœ¼ë¡œ ê´€ë¦¬
3. **êµ¬ì²´ì  íŠ¹ì§• í—ˆìš©**: 1:1 ë§¤ì¹­ë„ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì²´ì  íŠ¹ì§• ì…ë ¥ í—ˆìš©
4. **ì±„íŒ…ë§Œ ê°€ëŠ¥**: ë§¤ì¹­ í›„ì—ë„ ì¶”ê°€ ì •ë³´ ê³µê°œ ì—†ì´ ì±„íŒ…ë§Œ ì§„í–‰

## ğŸ“± ë‹¨ìˆœí™”ëœ ì‹œë‚˜ë¦¬ì˜¤

### 1. ì¦‰ì„ ëª¨ì„ ìƒì„±
```
ì£¼ìµœì í–‰ë™:
1. "ì¦‰ì„ ëª¨ì„ ë§Œë“¤ê¸°" ì„ íƒ
2. ëª¨ì„ ì •ë³´ ì…ë ¥:
   - ëª¨ì„ëª…: "ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì "
   - ìœ íš¨ì‹œê°„: 3ì‹œê°„
   - íŠ¹ì§• ì¹´í…Œê³ ë¦¬ ì„ íƒ (5-10ê°œ)
3. ëª¨ì„ ì½”ë“œ ìƒì„±: "CAFE2024"
4. QR ì½”ë“œ ê³µìœ 
```

### 2. ëª¨ì„ ì°¸ê°€
```
ì°¸ê°€ì í–‰ë™:
1. QR ìŠ¤ìº” ë˜ëŠ” ì½”ë“œ ì…ë ¥
2. ë‹‰ë„¤ì„ë§Œ ì…ë ¥: "ì»¤í”¼ëŸ¬ë²„" (ëª¨ì„ ì „ìš©)
3. ì…ì¥ ì™„ë£Œ
```

### 3. í˜¸ê° í‘œí˜„
```
1. "í˜¸ê° í‘œí˜„í•˜ê¸°" íƒ­
2. íŠ¹ì§• ì…ë ¥:
   - ìƒì˜: ê²€ì€ìƒ‰ í›„ë“œí‹°
   - í•˜ì˜: ì²­ë°”ì§€
   - ì•ˆê²½: ì°©ìš©
   - íŠ¹ë³„í•œ íŠ¹ì§•: "ë§¥ë¶ì— ìŠ¤í‹°ì»¤ ë§ìŒ"
3. ì „ì†¡ (1ëª…ë§Œ ë§¤ì¹­ë˜ì–´ë„ OK)
```

### 4. ë§¤ì¹­ ë° ì±„íŒ…
```
1. ìƒí˜¸ ë§¤ì¹­ ì‹œ ì•Œë¦¼
2. ì±„íŒ…ë°© ìë™ ìƒì„±
3. ì„œë¡œì˜ ë‹‰ë„¤ì„ë§Œ í‘œì‹œ
4. ìµëª… ì±„íŒ… ì§„í–‰
5. ì¶”ê°€ ì •ë³´ ê³µê°œ ì—†ìŒ
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ (ìˆ˜ì •)

### ì¦‰ì„ ëª¨ì„ í…Œì´ë¸”
```sql
-- ì¦‰ì„ ëª¨ì„ (ë³€ê²½ ì—†ìŒ)
CREATE TABLE instant_meetings (
  id UUID PRIMARY KEY,
  code VARCHAR(10) UNIQUE,
  name VARCHAR(100),
  creator_id UUID REFERENCES users(id),
  location JSONB,
  feature_categories TEXT[],
  expires_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ì¦‰ì„ ì°¸ê°€ ê¸°ë¡ (ë‹¨ìˆœí™”)
CREATE TABLE instant_participants (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  meeting_id UUID REFERENCES instant_meetings(id),
  nickname VARCHAR(50),  -- ëª¨ì„ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ë‹‰ë„¤ì„
  joined_at TIMESTAMP DEFAULT NOW(),
  left_at TIMESTAMP,
  is_active BOOLEAN DEFAULT true,
  UNIQUE(user_id, meeting_id)
);

-- ì¦‰ì„ í˜¸ê° í‘œí˜„ (êµ¬ì²´ì  íŠ¹ì§• í—ˆìš©)
CREATE TABLE instant_interests (
  id UUID PRIMARY KEY,
  from_participant_id UUID REFERENCES instant_participants(id),
  meeting_id UUID REFERENCES instant_meetings(id),
  target_features JSONB,  -- êµ¬ì²´ì  íŠ¹ì§•ë„ í—ˆìš©
  created_at TIMESTAMP DEFAULT NOW()
);

-- ì¦‰ì„ ë§¤ì¹­ ê¸°ë¡
CREATE TABLE instant_matches (
  id UUID PRIMARY KEY,
  meeting_id UUID REFERENCES instant_meetings(id),
  participant1_id UUID REFERENCES instant_participants(id),
  participant2_id UUID REFERENCES instant_participants(id),
  chat_room_id UUID,
  matched_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(participant1_id, participant2_id)
);

-- ì±„íŒ… ë©”ì‹œì§€ (ìµëª…)
CREATE TABLE instant_messages (
  id UUID PRIMARY KEY,
  chat_room_id UUID,
  sender_participant_id UUID REFERENCES instant_participants(id),
  content TEXT,  -- ì•”í˜¸í™”
  message_type VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW()
);

-- í™œë™ ë¡œê·¸ (ë¶„ì„ìš©)
CREATE TABLE instant_activity_logs (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),  -- ë‚´ë¶€ ì¶”ì ìš©
  meeting_id UUID REFERENCES instant_meetings(id),
  activity_type VARCHAR(50),  -- JOIN, LEAVE, INTEREST_SENT, MATCH, MESSAGE
  activity_data JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## ğŸ” ìµëª…ì„± ë³´ì¥ ë°©ì‹

### 1. ë°ì´í„° ë¶„ë¦¬
```typescript
// ì°¸ê°€ì ì •ë³´ëŠ” ìµœì†Œí•œìœ¼ë¡œ
interface InstantParticipant {
  id: string;
  nickname: string;  // ì˜¤ì§ ì´ê²ƒë§Œ ê³µê°œ
  meetingId: string;
  // í”„ë¡œí•„ ì •ë³´ ì—†ìŒ
}

// ì‚¬ìš©ì ì¶”ì ì€ ë°±ì—”ë“œì—ì„œë§Œ
interface InternalTracking {
  userId: string;      // ì‹¤ì œ ì‚¬ìš©ì ID
  participantId: string;  // ìµëª… ì°¸ê°€ì ID
  // í”„ë¡ íŠ¸ì—”ë“œì— ì ˆëŒ€ ë…¸ì¶œí•˜ì§€ ì•ŠìŒ
}
```

### 2. íŠ¹ì§• ë§¤ì¹­ ë¡œì§ (ìˆ˜ì •)
```typescript
class InstantMatchingService {
  async expressInterest(
    fromParticipantId: string,
    targetFeatures: any  // êµ¬ì²´ì  íŠ¹ì§• í—ˆìš©
  ): Promise<void> {
    // 1. íŠ¹ì§•ê³¼ ì¼ì¹˜í•˜ëŠ” ì°¸ê°€ì ì°¾ê¸°
    const matches = await this.findMatches(targetFeatures);
    
    // 2. 1ëª…ì´ë“  ì—¬ëŸ¬ëª…ì´ë“  ëª¨ë‘ì—ê²Œ ì „ì†¡
    for (const match of matches) {
      await this.saveInterest(fromParticipantId, match.id, targetFeatures);
      
      // 3. ì¦‰ì‹œ ì—­ë°©í–¥ í™•ì¸
      const reverseMatch = await this.checkReverseMatch(
        fromParticipantId, 
        match.id
      );
      
      if (reverseMatch) {
        await this.createMatch(fromParticipantId, match.id);
      }
    }
  }
}
```

## ğŸ“± ë‹¨ìˆœí™”ëœ UI/UX

### 1. ëª¨ì„ ì°¸ê°€ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  < ì¦‰ì„ ëª¨ì„ ì°¸ê°€               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”          â”‚
â”‚  (ì´ ëª¨ì„ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤)     â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì»¤í”¼ëŸ¬ë²„                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚         [ ì…ì¥í•˜ê¸° ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. í˜¸ê° í‘œí˜„ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  < í˜¸ê° í‘œí˜„í•˜ê¸°                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ë§ˆìŒì— ë“œëŠ” ì‚¬ëŒì˜ íŠ¹ì§•ì„      â”‚
â”‚  ì…ë ¥í•´ì£¼ì„¸ìš”                   â”‚
â”‚                                 â”‚
â”‚  ìƒì˜ ìƒ‰ìƒ                      â”‚
â”‚  [ê²€ì€ìƒ‰ í›„ë“œí‹° â–¼]             â”‚
â”‚                                 â”‚
â”‚  í•˜ì˜ ì¢…ë¥˜                      â”‚
â”‚  [ì²­ë°”ì§€ â–¼]                    â”‚
â”‚                                 â”‚
â”‚  ì•ˆê²½                           â”‚
â”‚  (â€¢) ì°©ìš©  ( ) ë¯¸ì°©ìš©          â”‚
â”‚                                 â”‚
â”‚  íŠ¹ë³„í•œ íŠ¹ì§•                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ë§¥ë¶ì— ê°œë°œ ìŠ¤í‹°ì»¤ ë§ìŒ  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚        [ í˜¸ê° ë³´ë‚´ê¸° ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ë§¤ì¹­ í›„ ì±„íŒ…
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  < ì»¤í”¼ëŸ¬ë²„                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ‰ ì„œë¡œ í˜¸ê°ì„ í‘œí˜„í–ˆì–´ìš”!      â”‚
â”‚                                 â”‚
â”‚  ì•ˆë…•í•˜ì„¸ìš”!                    â”‚
â”‚                      ë°˜ê°€ì›Œìš”!   â”‚
â”‚                                 â”‚
â”‚  í˜¹ì‹œ ê°œë°œìì‹ ê°€ìš”?              â”‚
â”‚                    ë„¤ ë§ì•„ìš”!    â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ˜Š | ë©”ì‹œì§€ ì…ë ¥...        ì „ì†¡ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ API ìˆ˜ì •ì‚¬í•­

### 1. ëª¨ì„ ì°¸ê°€ (ë‹¨ìˆœí™”)
```typescript
POST /api/v1/instant-meetings/join
Body: {
  code: string,
  nickname: string  // ì´ê²ƒë§Œ í•„ìš”
}
```

### 2. í˜¸ê° í‘œí˜„ (êµ¬ì²´ì  íŠ¹ì§• í—ˆìš©)
```typescript
POST /api/v1/instant-meetings/:meetingId/interests
Body: {
  targetFeatures: {
    upperWear: "ê²€ì€ìƒ‰ í›„ë“œí‹°",
    lowerWear: "ì²­ë°”ì§€", 
    glasses: true,
    customFeatures: {
      special: "ë§¥ë¶ì— ê°œë°œ ìŠ¤í‹°ì»¤ ë§ìŒ"
    }
  }
}
```

### 3. ë§¤ì¹­ ì •ë³´ (ìµœì†Œ ì •ë³´ë§Œ)
```typescript
GET /api/v1/instant-meetings/:meetingId/matches
Response: {
  matches: [{
    id: string,
    participantNickname: string,  // ë‹‰ë„¤ì„ë§Œ
    chatRoomId: string,
    matchedAt: string
  }]
}
```

## ğŸ“Š í†µê³„ ë° ë¶„ì„

### ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ì •ë³´
- ë‚´ê°€ ë³´ë‚¸ í˜¸ê° ìˆ˜
- ë‚´ê°€ ë°›ì€ í˜¸ê° ìˆ˜ (ìˆ«ìë§Œ)
- ë§¤ì¹­ ì„±ê³µ ìˆ˜

### ë‚´ë¶€ ë¶„ì„ìš© (ì‚¬ìš©ìì—ê²Œ ë¹„ê³µê°œ)
- ëª¨ì„ë³„ ì°¸ê°€ ì´ë ¥
- ë§¤ì¹­ ì„±ê³µë¥ 
- í™œë™ íŒ¨í„´ ë¶„ì„
- ì•ˆì „ ê´€ë ¨ ëª¨ë‹ˆí„°ë§

## ğŸ›¡ï¸ í”„ë¼ì´ë²„ì‹œ ê°•í™”

1. **í”„ë¡ íŠ¸ì—”ë“œ**
   - ì‹¤ì œ user ID ë…¸ì¶œ ì•ˆí•¨
   - participant IDë§Œ ì‚¬ìš©
   - ë‹‰ë„¤ì„ ì™¸ ì •ë³´ í‘œì‹œ ì•ˆí•¨

2. **ë°±ì—”ë“œ**
   - user_id â†” participant_id ë§¤í•‘ì€ ì„œë²„ì—ì„œë§Œ ê´€ë¦¬
   - ë¡œê·¸ëŠ” ë³´ì¡´í•˜ë˜ ìµëª…í™”í•˜ì—¬ ì €ì¥
   - ì±„íŒ… ë‚´ìš© ì•”í˜¸í™”

3. **ë§¤ì¹­ í›„ì—ë„**
   - í”„ë¡œí•„ ê³µê°œ ì˜µì…˜ ì—†ìŒ
   - ì˜¤ì§ ì±„íŒ…ë§Œ ê°€ëŠ¥
   - ì‹¤ëª…ì´ë‚˜ ì—°ë½ì²˜ êµí™˜ì€ ììœ¨

---

ì´ë ‡ê²Œ ìˆ˜ì •í•˜ë©´ Glimpseì˜ ìµëª…ì„± ì»¨ì…‰ì— ì™„ë²½í•˜ê²Œ ë¶€í•©í•˜ë©´ì„œë„ ì¦‰ì„ ëª¨ì„ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.