# Glimpse 익명 데이팅 앱 - 통합 프로젝트 요구사항

## 프로젝트 개요

Glimpse는 한국 시장을 타겟으로 한 프라이버시 중심의 데이팅 앱입니다. **익명성과 그룹 기반 매칭**을 핵심으로 하며, React Native 모바일 앱과 Node.js 백엔드로 구성된 monorepo 구조입니다.

**핵심 컨셉:** 사용자들은 회사, 대학교, 취미 그룹에 참여하여 다른 멤버들에게 익명으로 관심을 표현할 수 있습니다. 상호 관심이 확인되어야만 서로의 닉네임이 공개되어 채팅이 가능해집니다.

## 기술 스택

### 프론트엔드 (Mobile App)
- **Framework:** React Native with Expo (managed workflow)
- **Language:** TypeScript with strict mode
- **State Management:** Zustand
- **Authentication:** Clerk (SMS verification)
- **Payments:** Stripe React Native SDK + Korean payment gateways
- **Real-time:** Socket.IO client
- **Testing:** Playwright E2E, Jest unit tests

### 백엔드 (Server)
- **Framework:** Node.js with Express.js
- **Language:** TypeScript
- **Database:** PostgreSQL with Prisma ORM
- **Authentication:** JWT with Clerk integration
- **Payments:** TossPay, KakaoPay, Stripe webhooks
- **Real-time:** Socket.IO server
- **Storage:** AWS S3 for file uploads
- **Notifications:** Firebase Cloud Messaging

### 공유 (Shared)
- **Types:** Shared TypeScript interfaces
- **Utils:** Common utilities and constants
- **Validation:** Shared validation schemas

## 시스템 요구사항

### 요구사항 1: Monorepo 개발 환경 및 배포 (우선순위: 높음)

**사용자 스토리:** 개발자로서, 프론트엔드와 백엔드를 통합적으로 개발하고 배포할 수 있는 일관된 환경을 원합니다.

#### 수락 기준
1. **Workspace 관리:** npm workspaces를 사용하여 mobile/, server/, shared/ 패키지 관리
2. **타입 안전성:** 프론트엔드-백엔드 간 완전한 TypeScript 타입 공유
3. **통합 개발:** `npm run dev`로 모바일 앱과 서버 동시 실행
4. **통합 빌드:** `npm run build`로 전체 프로젝트 빌드
5. **통합 테스트:** `npm run test`로 모든 워크스페이스 테스트 실행
6. **Docker 지원:** 개발 및 프로덕션 환경용 Docker 컨테이너 제공

### 요구사항 2: 사용자 인증 및 익명성 관리 (우선순위: 높음)

**사용자 스토리:** 사용자로서, 개인정보 보호를 받으면서 SMS 인증을 통해 안전하게 앱에 가입하고 싶습니다.

#### 수락 기준
1. **SMS 인증:** 한국 통신사 지원하는 SMS 인증 코드 전송 및 검증
2. **익명 계정:** 인증 완료 시 익명 사용자 계정 생성 (닉네임 기반)
3. **JWT 토큰:** Clerk 기반 안전한 JWT 토큰 발급 및 관리
4. **회사 인증:** 다음 방법들을 통한 회사/기관 인증 지원:
   - 회사 이메일 도메인 자동 인증
   - 사원증/학생증 OCR 인증 (네이버/구글 Vision API)
   - 기존 인증 멤버의 초대 코드
   - 관리자 수동 승인
5. **중복 방지:** 동일 전화번호 중복 가입 방지
6. **개인정보 보호:** 모든 개인 식별 정보 암호화 저장

### 요구사항 3: 그룹 기반 매칭 시스템 (우선순위: 높음)

**사용자 스토리:** 사용자로서, 실제 연관성이 있는 사람들과 만날 수 있도록 다양한 그룹을 통해 매칭되고 싶습니다.

#### 수락 기준
1. **그룹 유형 지원:** 4가지 그룹 유형 완전 구현
   - **공식 그룹:** 회사/대학교 인증 기반 자동 생성
   - **생성 그룹:** 사용자 직접 생성 (취미, 스터디 등)
   - **인스턴스 그룹:** 일회성 이벤트용 임시 그룹
   - **장소 기반 그룹:** GPS/QR코드 인증 위치 기반 그룹
2. **그룹 관리:** 그룹 생성, 참여, 탈퇴, 관리자 권한 시스템
3. **최소 기준:** 성별 균형 등 매칭 활성화를 위한 최소 멤버 기준
4. **위치 기반:** Kakao Map API 연동한 위치 인증 시스템
5. **QR 코드:** 현장 이벤트용 QR 코드 생성 및 스캔 기능

### 요구사항 4: 익명 좋아요 및 매칭 시스템 (우선순위: 높음)

**사용자 스토리:** 사용자로서, 거절에 대한 두려움 없이 익명으로 관심을 표현하고 상호 관심 시에만 정체성을 공개하고 싶습니다.

#### 수락 기준
1. **익명 좋아요:** 발신자 신원 완전 익명화
2. **크레딧 시스템:** 
   - 무료 사용자: 1일 1회 무료 좋아요
   - 추가 좋아요: 크레딧 구매 필요
   - 프리미엄 사용자: 무제한 좋아요
3. **쿨다운 정책:** 동일 상대에게 2주 간격 제한
4. **상호 매칭:** 양방향 좋아요 시 매치 생성 및 닉네임 공개
5. **알림 시스템:** 좋아요 수신 시 개수만 표시 (신원 비공개)
6. **매칭 알고리즘:** 나이, 활동성, 프로필 완성도 기반 호환성 점수

### 요구사항 5: 실시간 암호화 채팅 시스템 (우선순위: 중간)

**사용자 스토리:** 매칭된 사용자로서, 안전하고 실시간으로 대화할 수 있는 채팅 기능을 원합니다.

#### 수락 기준
1. **실시간 채팅:** Socket.IO 기반 즉시 메시지 전송/수신
2. **종단간 암호화:** AES-GCM 암호화로 모든 메시지 보호
3. **채팅 기능:**
   - 텍스트 메시지, 이미지 전송
   - 타이핑 인디케이터
   - 읽음 표시 (프리미엄 기능)
   - 메시지 검색 및 히스토리
4. **보안 기능:**
   - 메시지 신고 및 차단
   - 부적절한 콘텐츠 필터링
   - 메시지 삭제 (5분 이내)
5. **오프라인 지원:** 메시지 큐잉 및 재연결 처리

### 요구사항 6: 한국형 결제 시스템 (우선순위: 중간)

**사용자 스토리:** 사용자로서, 익숙한 한국 결제 방식으로 안전하게 프리미엄 기능을 구매하고 싶습니다.

#### 수락 기준
1. **결제 수단 지원:**
   - 토스페이 (Toss Payments)
   - 카카오페이 (Kakao Pay)
   - 신용/체크카드 (Stripe)
   - 실시간 계좌이체
2. **상품 구성:**
   - 크레딧 패키지: ₩2,500 (5개) ~ ₩19,000 (50개)
   - 월간 프리미엄: ₩9,900
   - 연간 프리미엄: ₩99,000 (17% 할인)
3. **프리미엄 혜택:**
   - 무제한 좋아요
   - 좋아요 받은 사람 확인
   - 우선 매칭
   - 슈퍼 좋아요
   - 읽음 표시
   - 온라인 상태 표시
4. **결제 보안:** PCI DSS 준수, 카드 정보 비저장
5. **웹훅 처리:** 결제 상태 실시간 동기화

### 요구사항 7: 푸시 알림 및 실시간 업데이트 (우선순위: 중간)

**사용자 스토리:** 사용자로서, 중요한 활동(매치, 메시지)에 대해 즉시 알림을 받고 싶습니다.

#### 수락 기준
1. **FCM 통합:** Firebase Cloud Messaging 완전 구현
2. **알림 유형:**
   - 새 매치 알림
   - 메시지 수신 알림
   - 좋아요 수신 알림 (개수만)
   - 구독 만료 알림
3. **익명성 보장:** 알림에서 발신자 신원 비공개
4. **사용자 제어:** 알림 타입별 on/off 설정
5. **배터리 최적화:** 효율적인 알림 전송 및 배터리 사용량 최소화

### 요구사항 8: 파일 업로드 및 콘텐츠 관리 (우선순위: 중간)

**사용자 스토리:** 사용자로서, 프로필 사진과 인증 문서를 안전하게 업로드하고 관리하고 싶습니다.

#### 수락 기준
1. **AWS S3 연동:** 확장 가능한 파일 저장소
2. **이미지 처리:** Sharp 라이브러리로 자동 최적화
3. **지원 파일:**
   - 프로필 이미지 (JPG, PNG, WebP)
   - 채팅 이미지
   - 인증 문서 (사원증, 학생증)
4. **보안:** 업로드된 파일 스캔 및 검증
5. **용량 관리:** 파일 크기 제한 및 저장소 최적화

### 요구사항 9: 위치 기반 서비스 (우선순위: 낮음)

**사용자 스토리:** 사용자로서, 주변 사람들과 연결되고 위치 기반 그룹에 참여하고 싶습니다.

#### 수락 기준
1. **Kakao Map 연동:** 한국 지도 서비스 통합
2. **GPS 기능:** 사용자 위치 기반 그룹 추천
3. **근처 사용자:** 반경 내 활성 사용자 표시
4. **장소 인증:** GPS 또는 QR 코드로 위치 확인
5. **개인정보 보호:** 위치 정보 암호화 및 제한적 사용

### 요구사항 10: 관리자 도구 및 모니터링 (우선순위: 낮음)

**사용자 스토리:** 관리자로서, 플랫폼의 안전성과 건전성을 유지하기 위한 관리 도구를 원합니다.

#### 수락 기준
1. **관리자 대시보드:** 사용자, 그룹, 신고 관리
2. **신고 처리:** 부적절한 행동 신고 및 조치 시스템
3. **통계 및 분석:** 사용자 활동, 매칭률, 수익 분석
4. **모니터링:** 시스템 성능 및 오류 모니터링
5. **보안 감시:** 의심 활동 자동 감지 및 경고

## 비즈니스 모델

### 수익 구조
- **무료 티어:** 1일 1회 좋아요 + 기본 매칭
- **크레딧 판매:** ₩2,500-19,000 마이크로 결제
- **프리미엄 구독:** 월 ₩9,900, 연 ₩99,000
- **목표 ARPU:** ₩15,000-25,000
- **전환율 목표:** 5-8% (무료→유료)

### 핵심 차별점
1. **완전한 익명성:** 매치 전까지 신원 완전 비공개
2. **그룹 기반:** 실제 연관성 있는 사람들과의 매칭
3. **한국 특화:** SMS 인증, 한국 결제, 회사 문화 반영
4. **프라이버시 중심:** 최소한의 개인정보 수집

## 개발 우선순위

### Phase 1: 핵심 기능 (완료)
- ✅ 사용자 인증 및 회원가입
- ✅ 기본 그룹 및 매칭 시스템
- ✅ 실시간 채팅
- ✅ 결제 시스템

### Phase 2: 고도화 기능 (진행 중)
- 🔄 위치 기반 서비스
- 🔄 고급 알림 시스템
- 🔄 관리자 도구

### Phase 3: 확장 기능 (예정)
- 📋 영상 통화
- 📋 음성 메시지
- 📋 스토리 기능
- 📋 AI 기반 매칭

## 보안 및 컴플라이언스

### 데이터 보호
- **암호화:** 모든 민감 데이터 AES-256 암호화
- **익명화:** 개인 식별 정보 최소화
- **GDPR 준수:** 유럽 사용자 대응
- **개인정보보호법:** 한국 법규 준수

### 보안 조치
- **JWT 인증:** 안전한 토큰 기반 인증
- **Rate Limiting:** API 남용 방지
- **Input Validation:** 모든 입력 데이터 검증
- **SQL Injection 방지:** Prisma ORM 사용
- **XSS 방지:** 콘텐츠 필터링

## 성능 요구사항

### 응답 시간
- **API 응답:** 평균 200ms 이하
- **채팅 메시지:** 500ms 이하 전송
- **이미지 업로드:** 10MB 이하 5초 내

### 확장성
- **동시 사용자:** 10,000명 지원
- **메시지 처리:** 초당 1,000건
- **데이터베이스:** 100만 사용자 규모

### 가용성
- **업타임:** 99.9% 이상
- **백업:** 일일 자동 백업
- **재해 복구:** 4시간 내 복구

---

이 요구사항서는 Glimpse 앱의 완전한 기능 구현을 위한 가이드라인입니다. 각 요구사항은 사용자 중심적이며, 한국 시장의 특성과 프라이버시 보호를 최우선으로 고려합니다.